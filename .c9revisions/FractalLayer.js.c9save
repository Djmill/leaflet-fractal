{"ts":1365422405657,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"L.TileLayer.FractalLayer = L.TileLayer.Canvas.extend({\r\n\toptions: {\r\n\t\tasync: true,\r\n\t\tmaxZoom:23,\r\n\t\tcontinuousWorld:true\r\n\t},\r\n\tinitialize: function (workers,fractal) {\r\n\tvar fractalType,mi;\r\n\t\tfractal=fractal||\"mandlebrot\";\r\n\tthis.fractals = {\r\n\t\tmandlebrot:{\r\n\t\tfractalType:\"xn = x*x - y*y + cx;\\n\\\r\n\t\t\t\t\tyn = ((x*y)*2) + cy;\",\r\n\t\tmi:500\r\n\t\t},\r\n\t\tmultibrot3:{\r\n\t\tfractalType:\"xn=Math.pow(x,3)-3*x*Math.pow(y,2) + cx;\\n\\\r\n\t\t\t\t\tyn=3*Math.pow(x,2)*y-Math.pow(y,3) + cy;\",\r\n\t\tmi:200\r\n\t},\r\n\tmultibrot5:{\r\n\t\tfractalType:\"xn=Math.pow(x,5)-(10*Math.pow(x,3)*Math.pow(y,2))+(5*x*Math.pow(y,4)) + cx;\\n\\\r\n\t\t\t\t\tyn=(5*Math.pow(x,4)*y)-(10*x*x*Math.pow(y,3))+Math.pow(y,5) + cy;\",\r\n\t\tmi:500\r\n\t},\r\n\t\"burning ship\":{\r\n\t\tfractalType:\"xn =  x*x - y*y - cx;\\n\\\r\n\t\t\t\t\tyn = 2*Math.abs(x*y) + cy;\",\r\n\t\tmi:500\r\n\t},\r\n\ttricorn:{\r\n\t\tfractalType : \"xn =  x*x - y*y - cx;\\n\\\r\n\t\t\t\t\tyn =(x+x)*(-y) + cy;\",\r\n\t\tmi:500\r\n\t\r\n\t},\r\n\tjulia:{\r\n\t\tfractalType : \"cr = 0.1;\\n\\\r\n\t\tci = -0.1;\\n\\\r\n\t\txn = cr*x-ci*y+cx;\\n\\\r\n\t\t\t\t\tyn = 2*(cr*x+ci*y)+cy;\",\r\n\t\tmi:50\r\n\t}\r\n}\r\n\r\n\r\n\t\tcommunist.IEpath=\"ie.js\";\r\n\t\tthis.workers=workers;\r\n\t\tthis.workerFunc=Mustache.render(this.template,this.fractals[fractal]);\r\n\t\t},\r\n\t\tonAdd:function(map){\r\n\t\tvar _this = this;\r\n\t\tthis._workers = new Array(_this.workers);\r\n\t\tvar i = 0;\r\n\t\twhile(i<_this.workers){\r\n\t\tthis._workers[i]=communist(_this.workerFunc);\r\n\t\ti++\r\n\t\t}\r\n\t\treturn L.TileLayer.Canvas.prototype.onAdd.call(this,map);\r\n\t},\r\n\tonRemove:function(map){\r\n\tvar len = this._workers.length;\r\n\tvar i =0;\r\n\twhile(i<len){\r\n\tthis._workers[i].close();\r\n\ti++;\r\n\t}\r\n\treturn L.TileLayer.Canvas.prototype.onRemove.call(this,map);\r\n\t},\r\n\tdrawTile: function (canvas, tilePoint) {\r\n\t\tvar _this = this,\r\n\t\tz = this._map.getZoom();\r\n\t\tcanvas._tileIndex = {x: tilePoint.x, y: tilePoint.y, z: z};\r\n\t\tthis._workers[parseInt((Math.random()*this.workers),10)].data({x: tilePoint.x, y:tilePoint.y, z: z}).then(function(data) {\r\n\t\t\tvar array=new Uint8ClampedArray(data.pixels);\r\n\t\t\tvar ctx = canvas.getContext('2d');\r\n\t\t\tvar imagedata = ctx.getImageData(0, 0, 256, 256);\r\n\t\t\timagedata.data.set(array);\r\n\t\t\tctx.putImageData(imagedata, 0, 0);\r\n\t\t\t_this.tileDrawn(canvas);\r\n\t\t});\r\n\t},\r\n\ttemplate:\"function(data,cb) {\\n\\\r\n\t\tvar scale = Math.pow(2, data.z - 1);\\n\\\r\n\tvar x0 = data.x / scale - 1;\\n\\\r\n\tvar y0 = data.y / scale - 1;\\n\\\r\n\t//x0,y0 tile offset\\n\\\r\n\tvar d = 1/(scale<<8);\\n\\\r\n\tvar pixels = new Array(262144);\\n\\\r\n\tvar MAX_ITER={{mi}};\\n\\\r\n\tvar c,cx,cy,cr,ci,x,y,xn,yn,dn,zr,zi,iii=0;\\n\\\r\n\t//c = value\\n\\\r\n\t//cx,cy = absolute coords\\n\\\r\n\t//px,px are pixel coords\\n\\\r\n\tfor (var py = 0; py < 256; py++) {\\n\\\r\n\t\tfor (var px = 0; px < 256; px++) {\\n\\\r\n\t\t\tcx = x0 + px*d;\\n\\\r\n\t\t\tcy = y0 + py*d;\\n\\\r\n\t\t\tx = 0; y = 0;\\n\\\r\n\t\t\tfor (var iter = 0; iter < MAX_ITER; iter++) {\\n\\\r\n\t\t\t\t{{fractalType}}\\n\\\r\n\t\t\t\tif (xn*xn + yn*yn > 4) {\\n\\\r\n\t\t\t\t\tbreak;\\n\\\r\n\t\t\t\t}\\n\\\r\n\t\t\t\tx = xn;\\n\\\r\n\t\t\t\ty = yn;\\n\\\r\n\t\t\t}\\n\\\r\n\t\tc = (iter/MAX_ITER)*360;\\n\\\r\n\t\t(function(h,s){\\n\\\r\n\t\t\t//from http://schinckel.net/2012/01/10/hsv-to-rgb-in-javascript/\\n\\\r\n\t\t\tvar v = 0.75;\\n\\\r\n\t\t\tvar rgb, i, data = [];\\n\\\r\n\t\t\tif (s === 0) {\\n\\\r\n\t\t\t\trgb = [0.75, 0.1875, 0.75];\\n\\\r\n\t\t\t} else {\\n\\\r\n\t\t\t\th = h / 60;\\n\\\r\n\t\t\t\ti = Math.floor(h);\\n\\\r\n\t\t\t\tdata = [v*(1-s), v*(1-s*(h-i)), v*(1-s*(1-(h-i)))];\\n\\\r\n\t\t\t\tswitch(i) {\\n\\\r\n\t\t\t\t\tcase 0:\\n\\\r\n\t\t\t\t\t\trgb = [v, data[2], data[0]];\\n\\\r\n\t\t\t\t\t\tbreak;\\n\\\r\n\t\t\t\t\tcase 1:\\n\\\r\n\t\t\t\t\t\trgb = [data[1], v, data[0]];\\n\\\r\n\t\t\t\t\t\tbreak;\\n\\\r\n\t\t\t\t\tcase 2:\\n\\\r\n\t\t\t\t\t\trgb = [data[0], v, data[2]];\\n\\\r\n\t\t\t\t\t\tbreak;\\n\\\r\n\t\t\t\t\tcase 3:\\n\\\r\n\t\t\t\t\t\trgb = [data[0], data[1], v];\\n\\\r\n\t\t\t\t\t\tbreak;\\n\\\r\n\t\t\t\t\tcase 4:\\n\\\r\n\t\t\t\t\t\trgb = [data[2], data[0], v];\\n\\\r\n\t\t\t\t\t\tbreak;\\n\\\r\n\t\t\t\t\tdefault:\\n\\\r\n\t\t\t\t\t\trgb = [v, data[0], data[1]];\\n\\\r\n\t\t\t\t\t\tbreak;\\n\\\r\n\t\t\t\t}}\\n\\\r\n\t\t\t\tpixels[iii++]=(rgb[0]*255);\\n\\\r\n\t\t\t\tpixels[iii++]=(rgb[1]*255);\\n\\\r\n\t\t\t\tpixels[iii++]=(rgb[2]*255);\\n\\\r\n\t\t\t\tpixels[iii++]=(255);\\n\\\r\n\t\t\t\\n\\\r\n\t\t})(c,c===360?0:0.75)\\n\\\r\n\t\t}\\n\\\r\n\t}\\n\\\r\n\tvar array = new Uint8ClampedArray(pixels);\\n\\\r\n \t\t\tvar buf = array.buffer;\\n\\\r\n\tcb({pixels: buf}/*,[buf]*/);\\n\\\r\n}\"\r\n});\r\nL.tileLayer.fractalLayer=function(workers,fractal){\r\n\treturn new L.TileLayer.FractalLayer(workers,fractal);\r\n}\r\n"]],"start1":0,"start2":0,"length1":0,"length2":4118}]],"length":4118}
{"contributors":[],"silentsave":false,"ts":1365422756604,"patch":[[{"diffs":[[0,"m:23"],[-1,",\r\n\t\tcontinuousWorld:true"],[0,"\r\n\t}"]],"start1":93,"start2":93,"length1":33,"length2":8},{"diffs":[[0,"kers"],[-1,",fractal) {\r\n\tvar fractalType,mi;\r\n\t\tfractal=fractal||\"mandlebrot\";\r\n\tthis.fractals = {\r\n\t\tmandlebrot:{\r\n\t\tfractalType:\"xn = x*x - y*y + cx;\\n\\\r\n\t\t\t\t\tyn = ((x*y)*2) + cy;\",\r\n\t\tmi:500\r\n\t\t},\r\n\t\tmultibrot3:{\r\n\t\tfractalType:\"xn=Math.pow(x,3)-3*x*Math.pow(y,2) + cx;\\n\\\r\n\t\t\t\t\tyn=3*Math.pow(x,2)*y-Math.pow(y,3) + cy;\",\r\n\t\tmi:200\r\n\t},\r\n\tmultibrot5:{\r\n\t\tfractalType:\"xn=Math.pow(x,5)-(10*Math.pow(x,3)*Math.pow(y,2))+(5*x*Math.pow(y,4)) + cx;\\n\\\r\n\t\t\t\t\tyn=(5*Math.pow(x,4)*y)-(10*x*x*Math.pow(y,3))+Math.pow(y,5) + cy;\",\r\n\t\tmi:500\r\n\t},\r\n\t\"burning ship\":{\r\n\t\tfractalType:\"xn =  x*x - y*y - cx;\\n\\\r\n\t\t\t\t\tyn = 2*Math.abs(x*y) + cy;\",\r\n\t\tmi:500\r\n\t},\r\n\ttricorn:{\r\n\t\tfractalType : \"xn =  x*x - y*y - cx;\\n\\\r\n\t\t\t\t\tyn =(x+x)*(-y) + cy;\",\r\n\t\tmi:500\r\n\t\r\n\t},\r\n\tjulia:{\r\n\t\tfractalType : \"cr = 0.1;\\n\\\r\n\t\tci = -0.1;\\n\\\r\n\t\txn = cr*x-ci*y+cx;\\n\\\r\n\t\t\t\t\tyn = 2*(cr*x+ci*y)+cy;\",\r\n\t\tmi:50\r\n\t}\r\n}\r\n\r\n\r\n\t\tcommunist.IEpath=\"ie.js\";\r\n\t\tthis.workers=workers;\r\n\t\tthis.workerFunc=Mustache.render(this.template,this.fractals[fractal]);\r\n\t\t},\r\n\t\tonAdd:function(map){\r\n\t\tvar _this = thi"],[1,") {\r\n\t\t\r\n\t\tvar _this = this;\r\n\t\tthis.workers=worker"],[0,"s;\r\n"]],"start1":130,"start2":130,"length1":1058,"length2":59},{"diffs":[[0,"w Array("],[-1,"_this."],[0,"workers)"]],"start1":209,"start2":209,"length1":22,"length2":16},{"diffs":[[0,"while(i<"],[-1,"_this."],[0,"workers)"]],"start1":244,"start2":244,"length1":22,"length2":16},{"diffs":[[0,"mmunist("],[-1,"_this."],[0,"workerFu"]],"start1":284,"start2":284,"length1":22,"length2":16},{"diffs":[[0,"\t}\r\n"],[-1,"\t\treturn L.TileLayer.Canvas.prototype.onAdd.call(this,map);\r\n\t},\r\n\tonRemove:function(map){\r\n\tvar len = this._workers.length;\r\n\tvar i =0;\r\n\twhile(i<len){\r\n\tthis._workers[i].close();\r\n\ti++;\r\n\t}\r\n\treturn L.TileLayer.Canvas.prototype.onRemove.call(this,map);\r\n"],[0,"\t},\r"]],"start1":314,"start2":314,"length1":264,"length2":8},{"diffs":[[0,"\r\n\t}"],[-1,",\r\n\ttemplate:\"function(data,cb) {\\n\\\r\n\t\tvar scale = Math.pow(2, data.z - 1);\\n\\\r\n\tvar x0 = data.x / scale - 1;\\n\\\r\n\tvar y0 = data.y / scale - 1;\\n\\\r\n\t//x0,y0 tile offset\\n\\\r\n\tvar d = 1/(scale<<8);\\n\\\r\n\tvar pixels = new Array(262144);\\n\\\r\n\tvar MAX_ITER={{mi}};\\n\\\r\n\tvar c,cx,cy,cr,ci,x,y,xn,yn,dn,zr,zi,iii=0;\\n\\\r\n\t//c = value\\n\\\r\n\t//cx,cy = absolute coords\\n\\\r\n\t//px,px are pixel coords\\n\\\r\n\tfor (var py = 0; py < 256; py++) {\\n\\\r\n\t\tfor (var px = 0; px < 256; px++) {\\n\\\r\n\t\t\tcx = x0 + px*d;\\n\\\r\n\t\t\tcy = y0 + py*d;\\n\\\r\n\t\t\tx = 0; y = 0;\\n\\\r\n\t\t\tfor (var iter = 0; iter < MAX_ITER; iter++) {\\n\\\r\n\t\t\t\t{{fractalType}}\\n\\\r\n\t\t\t\tif (xn*xn + yn*yn > 4) {\\n\\\r\n\t\t\t\t\tbreak;\\n\\\r\n\t\t\t\t}\\n\\\r\n\t\t\t\tx = xn;\\n\\\r\n\t\t\t\ty = yn;\\n\\\r\n\t\t\t}\\n\\\r\n\t\tc = (iter/MAX_ITER)*360;\\n\\\r\n\t\t(function(h,s){\\n\\\r\n\t\t\t//from http://schinckel.net/2012/01/10/hsv-to-rgb-in-javascript/\\n\\\r\n\t\t\tvar v = 0.75;\\n\\\r\n\t\t\tvar rgb, i, data = [];\\n\\\r\n\t\t\tif (s === 0) {\\n\\\r\n\t\t\t\trgb = [0.75, 0.1875, 0.75];\\n\\\r\n\t\t\t} else {\\n\\\r\n\t\t\t\th = h / 60;\\n\\\r\n\t\t\t\ti = Math.floor(h);\\n\\\r\n\t\t\t\tdata = [v*(1-s), v*(1-s*(h-i)), v*(1-s*(1-(h-i)))];\\n\\\r\n\t\t\t\tswitch(i) {\\n\\\r\n\t\t\t\t\tcase 0:\\n\\\r\n\t\t\t\t\t\trgb = [v, data[2], data[0]];\\n\\\r\n\t\t\t\t\t\tbreak;\\n\\\r\n\t\t\t\t\tcase 1:\\n\\\r\n\t\t\t\t\t\trgb = [data[1], v, data[0]];\\n\\\r\n\t\t\t\t\t\tbreak;\\n\\\r\n\t\t\t\t\tcase 2:\\n\\\r\n\t\t\t\t\t\trgb = [data[0], v, data[2]];\\n\\\r\n\t\t\t\t\t\tbreak;\\n\\\r\n\t\t\t\t\tcase 3:\\n\\\r\n\t\t\t\t\t\trgb = [data[0], data[1], v];\\n\\\r\n\t\t\t\t\t\tbreak;\\n\\\r\n\t\t\t\t\tcase 4:\\n\\\r\n\t\t\t\t\t\trgb = [data[2], data[0], v];\\n\\\r\n\t\t\t\t\t\tbreak;\\n\\\r\n\t\t\t\t\tdefault:\\n\\\r\n\t\t\t\t\t\trgb = [v, data[0], data[1]];\\n\\\r\n\t\t\t\t\t\tbreak;\\n\\\r\n\t\t\t\t}}\\n\\\r\n\t\t\t\tpixels[iii++]=(rgb[0]*255);\\n\\\r\n\t\t\t\tpixels[iii++]=(rgb[1]*255);\\n\\\r\n\t\t\t\tpixels[iii++]=(rgb[2]*255);\\n\\\r\n\t\t\t\tpixels[iii++]=(255);\\n\\\r\n\t\t\t\\n\\\r\n\t\t})(c,c===360?0:0.75)\\n\\\r\n\t\t}\\n\\\r\n\t}\\n\\\r\n\tvar array = new Uint8ClampedArray(pixels);\\n\\\r\n \t\t\tvar buf = array.buffer;\\n\\\r\n\tcb({pixels: buf}/*,[buf]*/);\\n\\\r\n}\""],[0,"\r\n})"]],"start1":851,"start2":851,"length1":1854,"length2":8},{"diffs":[[0,"(workers"],[-1,",fractal"],[0,"){\r\n\tret"]],"start1":895,"start2":895,"length1":24,"length2":16},{"diffs":[[0,"kers"],[-1,",fractal"],[0,");\r\n"]],"start1":947,"start2":947,"length1":16,"length2":8}]],"length":958,"saved":false}
{"ts":1365423300231,"patch":[[{"diffs":[[0,"\r\n\t\t"],[-1,"\r\n\t\tvar _this = this;\r\n\t\t"],[0,""],[1,""],[0,"this"]],"start1":137,"start2":137,"length1":33,"length2":8},{"diffs":[[0,"orkers){\r\n\t\t"],[1,"    "],[0,"this._worker"]],"start1":228,"start2":228,"length1":24,"length2":28},{"diffs":[[0,"[i]="],[-1,"communist(workerFunc)"],[1,"new Worker(\"worker.js\");\r\n            this._workers[i].onmessage=this.handleTile"],[0,";\r\n\t\t"],[1,"    "],[0,"i++"],[1,";"],[0,"\r\n\t\t}\r\n"],[1,"        this.messages={};\r\n"],[0,"\t},\r"]],"start1":257,"start2":257,"length1":44,"length2":135},{"diffs":[[0,"var "],[-1,"_this = this,\r\n\t\t"],[0,"z = "]],"start1":438,"start2":438,"length1":25,"length2":8},{"diffs":[[0,"z: z};\r\n"],[1,"        var tileID=tilePoint.x+\":\"+tilePoint.y+\":\"+z;\r\n        this.messages[tileID]=canvas;\r\n"],[0,"\t\tthis._"]],"start1":523,"start2":523,"length1":16,"length2":110},{"diffs":[[0,"s),10)]."],[-1,"data"],[1,"postMesssage"],[0,"({x: til"]],"start1":676,"start2":676,"length1":20,"length2":28},{"diffs":[[0,"z: z"],[-1,"}).then(function(data) {\r\n\t"],[1,",id:tileID});\r\n\t},\r\n    handleTile: function(e) {\r\n        var canvas;\r\n        if(this.messages[e.data.id]){\r\n            canvas = this.messages[e.data.id];\r\n        }\r\n    "],[0,"\t\tva"]],"start1":729,"start2":729,"length1":35,"length2":182},{"diffs":[[0,"edArray("],[1,"e."],[0,"data.pix"]],"start1":933,"start2":933,"length1":16,"length2":18},{"diffs":[[0,"0);\r\n\t\t\t"],[-1,"_"],[0,"this.til"]],"start1":1116,"start2":1116,"length1":17,"length2":16},{"diffs":[[0,";\r\n\t"],[-1,"\t});\r\n"],[0,"\t}\r\n"]],"start1":1146,"start2":1146,"length1":14,"length2":8}]],"length":1255,"saved":false}
{"ts":1365423345787,"patch":[[{"diffs":[[0,"postMess"],[-1,"s"],[0,"age({x: "]],"start1":684,"start2":684,"length1":17,"length2":16}]],"length":1254,"saved":false}
{"ts":1365423512837,"patch":[[{"diffs":[[0,"age="],[-1,"this.handleTile"],[1,"function(e) {\r\n        var canvas;\r\n        if(messages[e.data.id]){\r\n            canvas = messages[e.data.id];\r\n        }\r\n        \tvar array=new Uint8ClampedArray(e.data.pixels);\r\n\t\t\tvar ctx = canvas.getContext('2d');\r\n\t\t\tvar imagedata = ctx.getImageData(0, 0, 256, 256);\r\n\t\t\timagedata.data.set(array);\r\n\t\t\tctx.putImageData(imagedata, 0, 0);\r\n\t\t\tthis.tileDrawn(canvas);\r\n\t\t}"],[0,";\r\n\t"]],"start1":322,"start2":322,"length1":23,"length2":384},{"diffs":[[0,";\r\n\t\t}\r\n"],[1,"        var messages={};\r\n"],[0,"        "]],"start1":714,"start2":714,"length1":16,"length2":42},{"diffs":[[0,"essages="],[-1,"{}"],[1,"messages"],[0,";\r\n\t},\r\n"]],"start1":762,"start2":762,"length1":18,"length2":24},{"diffs":[[0,");\r\n"],[-1,"\t},\r\n    handleTile: function(e) {\r\n        var canvas;\r\n        if(this.messages[e.data.id]){\r\n            canvas = this.messages[e.data.id];\r\n        }\r\n    \t\tvar array=new Uint8ClampedArray(e.data.pixels);\r\n\t\t\tvar ctx = canvas.getContext('2d');\r\n\t\t\tvar imagedata = ctx.getImageData(0, 0, 256, 256);\r\n\t\t\timagedata.data.set(array);\r\n\t\t\tctx.putImageData(imagedata, 0, 0);\r\n\t\t\tthis.tileDrawn(canvas);\r\n\t"],[0,"\t}\r\n"]],"start1":1136,"start2":1136,"length1":410,"length2":8}]],"length":1245,"saved":false}
{"ts":1365423564419,"patch":[[{"diffs":[[0,"kers);\r\n"],[1,"        var _this=this;\r\n"],[0,"\t\tvar i "]],"start1":195,"start2":195,"length1":16,"length2":41},{"diffs":[[0,"     if("],[1,"_this."],[0,"messages"]],"start1":390,"start2":390,"length1":16,"length2":22},{"diffs":[[0,"anvas = "],[1,"_this."],[0,"messages"]],"start1":440,"start2":440,"length1":16,"length2":22},{"diffs":[[0,"0);\r\n\t\t\t"],[1,"_"],[0,"this.til"]],"start1":703,"start2":703,"length1":16,"length2":17},{"diffs":[[0,"\t}\r\n"],[-1,"        var messages={};\r\n"],[0,"    "]],"start1":756,"start2":756,"length1":34,"length2":8},{"diffs":[[0,"essages="],[-1,"messages"],[1,"{}"],[0,";\r\n\t},\r\n"]],"start1":774,"start2":774,"length1":24,"length2":18}]],"length":1251,"saved":false}
{"ts":1365423615886,"patch":[[{"diffs":[[0,"xZoom:23"],[1,",\r\n        continuousWorld:true"],[0,"\r\n\t},\r\n\t"]],"start1":89,"start2":89,"length1":16,"length2":47}]],"length":1282,"saved":false}
{"ts":1365424013192,"patch":[[{"diffs":[[0,"(workers"],[1,",fractalType"],[0,") {\r\n\t\tt"]],"start1":157,"start2":157,"length1":16,"length2":28}]],"length":1294,"saved":false}
{"ts":1365424040042,"patch":[[{"diffs":[[0,"ype) {\r\n"],[1,"        fractalType = fractalType||\"mandlebrot\";\r\n"],[0,"\t\tthis.w"]],"start1":174,"start2":174,"length1":16,"length2":66},{"diffs":[[0,"ker("],[-1,"\"worker"],[1,"fractalType+\""],[0,".js\""]],"start1":386,"start2":386,"length1":15,"length2":21}]],"length":1350,"saved":false}
{"ts":1365424048690,"patch":[[{"diffs":[[0,"tion(workers"],[1,",t"],[0,"){\r\n\treturn "]],"start1":1283,"start2":1283,"length1":24,"length2":26},{"diffs":[[0,"ayer(workers"],[1,",t"],[0,");\r\n}\r\n"]],"start1":1333,"start2":1333,"length1":19,"length2":21}]],"length":1354,"saved":false}
{"ts":1365424167648,"patch":[[{"diffs":[[0," Worker("],[1,"\"workers/\"+"],[0,"fractalT"]],"start1":382,"start2":382,"length1":16,"length2":27}]],"length":1365,"saved":false}
{"ts":1365424298200,"patch":[[{"diffs":[[0,"a.id];\r\n"],[1,"        }else{\r\n            return;\r\n"],[0,"        "]],"start1":578,"start2":578,"length1":16,"length2":53},{"diffs":[[0,"es={};\r\n"],[1,"        this.on(\"tileunload\", function(e) {\r\n            var pos = e.tile._tileIndex,\r\n                id = [pos.x, pos.y, pos.z].join(':');\r\n        });\r\n"],[0,"\t},\r\n\tdr"]],"start1":926,"start2":926,"length1":16,"length2":171}]],"length":1557,"saved":false}
{"contributors":[],"silentsave":false,"ts":1365424353538,"patch":[[{"diffs":[[0,"     if("],[1,"e.data.id in "],[0,"_this.me"]],"start1":500,"start2":500,"length1":16,"length2":29},{"diffs":[[0,"messages"],[-1,"[e.data.id]"],[0,"){\r\n    "]],"start1":527,"start2":527,"length1":27,"length2":16},{"diffs":[[0,";\r\n\t\t}\r\n        "],[1,"_"],[0,"this.messages={}"]],"start1":901,"start2":901,"length1":32,"length2":33},{"diffs":[[0,"join(':');\r\n"],[1,"                if(id in _this.messages){\r\n                    \r\n                }\r\n"],[0,"        });\r"]],"start1":1067,"start2":1067,"length1":24,"length2":108}]],"length":1644,"saved":false}
{"ts":1365424373680,"patch":[[{"diffs":[[0,"        "],[1,"delete _this.messages[id];"],[0,"\r\n      "]],"start1":1134,"start2":1134,"length1":16,"length2":42}]],"length":1670,"saved":false}
{"ts":1365424545807,"patch":[[{"diffs":[[0,"        "],[1,"this."],[0,"fractalT"]],"start1":182,"start2":182,"length1":16,"length2":21},{"diffs":[[0,"w Array("],[1,"this."],[0,"workers)"]],"start1":282,"start2":282,"length1":16,"length2":21},{"diffs":[[0,"    "],[-1,"var _this=this;\r\n\t"],[1,"this.messages={};\r\n        this.on(\"tileunload\", function(e) {\r\n            var pos = e.tile._tileIndex,\r\n                id = [pos.x, pos.y, pos.z].join(':');\r\n                if(id in _this.messages){\r\n                    delete _this.messages[id];\r\n                }\r\n        });\r\n\t},\r\n    onAdd:function(map){\r\n        var _this=this;\r\n    "],[0,"\tvar"]],"start1":310,"start2":310,"length1":26,"length2":352},{"diffs":[[0,"while(i<"],[1,"this."],[0,"workers)"]],"start1":673,"start2":673,"length1":16,"length2":21},{"diffs":[[0,"rkers/\"+"],[1,"this."],[0,"fractalT"]],"start1":734,"start2":734,"length1":16,"length2":21},{"diffs":[[0,"    "],[-1,"_this.messages={};\r\n        this.on(\"tileunload\", function(e) {\r\n            var pos = e.tile._tileIndex,\r\n                id = [pos.x, pos.y, pos.z].join(':');\r\n                if(id in _this.messages){\r\n                    delete _this.messages[id];\r\n                }\r\n        });\r\n\t"],[1,"return L.TileLayer.Canvas.prototype.onAdd(map);\r\n    "],[0,"},\r\n"]],"start1":1259,"start2":1259,"length1":294,"length2":61}]],"length":1783,"saved":false}
{"ts":1365424589574,"patch":[[{"diffs":[[0,"    "],[-1,"this.on(\"tileunload\", function(e) {\r\n            var pos = e.tile._tileIndex,\r\n                id = [pos.x, pos.y, pos.z].join(':');\r\n                if(id in _this.messages){\r\n                    delete _this.messages[id];\r\n                }\r\n        });"],[0,"\r\n\t}"]],"start1":337,"start2":337,"length1":263,"length2":8},{"diffs":[[0,";\r\n\t\t}\r\n"],[1,"        this.on(\"tileunload\", function(e) {\r\n            var pos = e.tile._tileIndex,\r\n                id = [pos.x, pos.y, pos.z].join(':');\r\n                if(id in _this.messages){\r\n                    delete _this.messages[id];\r\n                }\r\n        });\r\n"],[0,"        "]],"start1":992,"start2":992,"length1":16,"length2":281}]],"length":1793,"saved":false}
{"ts":1365424629969,"patch":[[{"diffs":[[0,"});\r\n       "],[-1," "],[0,"return L.Til"]],"start1":1260,"start2":1260,"length1":25,"length2":24},{"diffs":[[0,"pe.onAdd"],[-1,"("],[1,".call(this,"],[0,"map);\r\n "]],"start1":1305,"start2":1305,"length1":17,"length2":27}]],"length":1802,"saved":false}
{"ts":1365424686850,"patch":[[{"diffs":[[0,"    },\r\n"],[1,"    onRemove:function(map){\r\n        this.messages={};\r\n        \r\n    },\r\n"],[0,"\tdrawTil"]],"start1":1331,"start2":1331,"length1":16,"length2":90}]],"length":1876,"saved":false}
{"ts":1365424703852,"patch":[[{"diffs":[[0,"        "],[1,"var len = this._workers.length;\r\n    var i =0;\r\n\twhile(i<len){\r\n\tthis._workers[i].close();\r\n\ti++;\r\n\t}\r\n\treturn L.TileLayer.Canvas.prototype.onRemove.call(this,map);"],[0,"\r\n    },"]],"start1":1395,"start2":1395,"length1":16,"length2":180}]],"length":2040,"saved":false}
{"ts":1365424738990,"patch":[[{"diffs":[[0,"[i]."],[-1,"clos"],[1,"terminat"],[0,"e();"]],"start1":1481,"start2":1481,"length1":12,"length2":16}]],"length":2044,"saved":false}
